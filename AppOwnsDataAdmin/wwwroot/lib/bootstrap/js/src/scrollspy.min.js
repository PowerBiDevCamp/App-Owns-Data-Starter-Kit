/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/bootstrap@4.6.0/js/src/scrollspy.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import $ from"jquery";import Util from"./util";const NAME="scrollspy",VERSION="4.6.0",DATA_KEY="bs.scrollspy",EVENT_KEY="."+DATA_KEY,DATA_API_KEY=".data-api",JQUERY_NO_CONFLICT=$.fn[NAME],Default={offset:10,method:"auto",target:""},DefaultType={offset:"number",method:"string",target:"(string|element)"},EVENT_ACTIVATE="activate"+EVENT_KEY,EVENT_SCROLL="scroll"+EVENT_KEY,EVENT_LOAD_DATA_API=`load${EVENT_KEY}.data-api`,CLASS_NAME_DROPDOWN_ITEM="dropdown-item",CLASS_NAME_ACTIVE="active",SELECTOR_DATA_SPY='[data-spy="scroll"]',SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_NAV_ITEMS=".nav-item",SELECTOR_LIST_ITEMS=".list-group-item",SELECTOR_DROPDOWN=".dropdown",SELECTOR_DROPDOWN_ITEMS=".dropdown-item",SELECTOR_DROPDOWN_TOGGLE=".dropdown-toggle",METHOD_OFFSET="offset",METHOD_POSITION="position";class ScrollSpy{constructor(t,e){this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" .nav-link,"+this._config.target+" .list-group-item,"+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,$(this._scrollElement).on(EVENT_SCROLL,(t=>this._process(t))),this.refresh(),this._process()}static get VERSION(){return"4.6.0"}static get Default(){return Default}refresh(){const t=this._scrollElement===this._scrollElement.window?"offset":"position",e="auto"===this._config.method?t:this._config.method,s="position"===e?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();[].slice.call(document.querySelectorAll(this._selector)).map((t=>{let i;const l=Util.getSelectorFromElement(t);if(l&&(i=document.querySelector(l)),i){const t=i.getBoundingClientRect();if(t.width||t.height)return[$(i)[e]().top+s,l]}return null})).filter((t=>t)).sort(((t,e)=>t[0]-e[0])).forEach((t=>{this._offsets.push(t[0]),this._targets.push(t[1])}))}dispose(){$.removeData(this._element,DATA_KEY),$(this._scrollElement).off(EVENT_KEY),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null}_getConfig(t){if("string"!=typeof(t={...Default,..."object"==typeof t&&t?t:{}}).target&&Util.isElement(t.target)){let e=$(t.target).attr("id");e||(e=Util.getUID(NAME),$(t.target).attr("id",e)),t.target="#"+e}return Util.typeCheckConfig(NAME,t,DefaultType),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),s=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=s){const t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;){this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}}_activate(t){this._activeTarget=t,this._clear();const e=this._selector.split(",").map((e=>`${e}[data-target="${t}"],${e}[href="${t}"]`)),s=$([].slice.call(document.querySelectorAll(e.join(","))));s.hasClass("dropdown-item")?(s.closest(".dropdown").find(".dropdown-toggle").addClass("active"),s.addClass("active")):(s.addClass("active"),s.parents(".nav, .list-group").prev(".nav-link, .list-group-item").addClass("active"),s.parents(".nav, .list-group").prev(".nav-item").children(".nav-link").addClass("active")),$(this._scrollElement).trigger(EVENT_ACTIVATE,{relatedTarget:t})}_clear(){[].slice.call(document.querySelectorAll(this._selector)).filter((t=>t.classList.contains("active"))).forEach((t=>t.classList.remove("active")))}static _jQueryInterface(t){return this.each((function(){let e=$(this).data(DATA_KEY);if(e||(e=new ScrollSpy(this,"object"==typeof t&&t),$(this).data(DATA_KEY,e)),"string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}$(window).on(EVENT_LOAD_DATA_API,(()=>{const t=[].slice.call(document.querySelectorAll(SELECTOR_DATA_SPY));for(let e=t.length;e--;){const s=$(t[e]);ScrollSpy._jQueryInterface.call(s,s.data())}})),$.fn[NAME]=ScrollSpy._jQueryInterface,$.fn[NAME].Constructor=ScrollSpy,$.fn[NAME].noConflict=()=>($.fn[NAME]=JQUERY_NO_CONFLICT,ScrollSpy._jQueryInterface);export default ScrollSpy;
//# sourceMappingURL=/sm/563185cf3146e0791a99f00f2de7d11c0dd16d978d1d08872c48b73bc18305a6.map